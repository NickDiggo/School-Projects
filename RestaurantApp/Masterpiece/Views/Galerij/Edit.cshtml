@model GalerijEditViewModel
@{
	ViewData["Title"] = "Galerij";
}

<h1>Galerij</h1>

<div class="container">
    <form asp-action="Create" enctype="multipart/form-data" id="editForm" class="flex-row">
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
        
        <div class="form-group my-2">
            <input asp-for="NieuweAfbeelding" type="file" class="form-control" />
        </div>

        <div class="form-group my-2">
            <input type="submit" value="Toevoegen" class="btn bg-blue-deep gold raleway border-gold border border-1" />
            <a asp-controller="Galerij" asp-action="Index" class="btn bg-blue-deep gold raleway border-gold border border-1">Terug</a>
        </div>
    </form>
</div>
<div class="container">
    <div class="row g-3">

        @foreach (var img in Model.Afbeeldingen)
        {
            <div class="col-6 col-md-4 col-lg-3">
                <a onclick="showDeleteModal('@img')" class="image-wrapper position-relative d-block">

                    <img src="@img"
                         class="img-fluid rounded"
                         style="width: 100%; height: 200px; object-fit: cover;" />

                    <div class="delete-overlay d-flex justify-content-center align-items-center">
                        <i class="bi bi-trash-fill"></i>
                    </div>

                </a>
            </div>
        }

    </div>
</div>

<div class="modal fade" id="deleteModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0">
            <div class="modal-header border-bottom">
                <h5 class="modal-title fw-bold">Afbeelding verwijderen</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                Weet je zeker dat je deze afbeelding wilt verwijderen?
            </div>
            <div class="modal-footer border-top">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuleren</button>
                <form id="deleteForm" asp-controller="Galerij" asp-action="Delete">
                    <input type="hidden" name="relativePath" id="deleteImagePath" />
                    <button type="submit" class="btn btn-danger">Verwijder</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function showDeleteModal(relativePath) {
        document.getElementById('deleteImagePath').value = relativePath;

        var deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'));
        deleteModal.show();
    }
</script>